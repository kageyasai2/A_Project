<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://unpkg.com/bootstrap-show-password@1.2.1/dist/bootstrap-show-password.min.js"></script>

<form action="/user_foods/register" method="post">
  <h1>食材登録画面</h1>

  <table>
    <thead>
      <tr>
        <th>食材名</th>
        <th>賞味期限(カレンダー形式で選択)</th>
        <th>グラム数</th>
      </tr>
    </thead>

    <tbody id="displayArea">
      <tr id="templateForm" class="NotDisp">
        <td><input name="items[][food_name]" class="form-control mb-2" type="text" placeholder="食材名"></td>
        <td><input name="items[][date]" class="form-control mb-2" type="date" placeholder="賞味期限"></td>
        <td><input name="items[][gram]" class="form-control mb-2" type="number" placeholder="食材の重さ(g)"></td>
        <td><button type="button" name="removeButton"> - </button></td>
      </tr>
      <tr>
        <td><input name="items[][food_name]" class="form-control mb-2" type="text" placeholder="食材名"></td>
        <td><input name="items[][date]" class="form-control mb-2" type="date" placeholder="賞味期限"></td>
        <td><input name="items[][gram]" class="form-control mb-2" type="number" placeholder="食材の重さ(g)"></td>
        <td><button type="button" name="removeButton"> - </button></td>
      </tr>

    </tbody>
  </table>

  <button type="button" id="addButton" class="btn btn-primary mb-2" > 追加 </button>
  <input type="reset" class="btn btn-secondary mb-2" value="取り消し">
  <button type="submit" class="btn btn-secondary mb-2">食材登録</button>
 

  <style type="text/css">
    .NotDisp {
      display: none;
    }
  </style>

  <script>
  $(function(){
      var idNo = 1;

      $('button#addButton').on('click',function(){
          let tempTr = $('#templateForm');
          tempTr
              .clone(true)
              .removeAttr("id")
              .removeClass("NotDisp")
              .appendTo('#displayArea');

          idNo++;
      });

      $('button[name=removeButton]').on('click',function(){
          let removeObj = $(this).closest('tr');
          if(removeObj.attr('id') != 'templateForm') {
              removeObj.remove();
          }
      });

  });
  </script>

</form>
