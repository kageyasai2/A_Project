<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://unpkg.com/bootstrap-show-password@1.2.1/dist/bootstrap-show-password.min.js"></script>
<h1>食材廃棄登録画面</h1>
<%= erb :'user_foods/show_message' %>
<form id="test" action="/user_foods/food_discard" method="post">
  <table>
    <thead>
      <tr>
        <th>食材名</th>
        <th>グラム数</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td><input name="items[][food_name]" class="form-control mb-2" type="text" placeholder="食材名"></td>
        <td><input name="items[][gram]" class="form-control mb-2" type="number" placeholder="食材の重さ(g)"></td>
      </tr>

      <tr>
        <td><input name="items[][food_name]" class="form-control mb-2" type="text" placeholder="食材名"></td>
        <td><input name="items[][gram]" class="form-control mb-2" type="number" placeholder="食材の重さ(g)"></td>
      </tr>

      <tr>
        <td><input name="items[][food_name]" class="form-control mb-2" type="text" placeholder="食材名"></td>
        <td><input name="items[][gram]" class="form-control mb-2" type="number" placeholder="食材の重さ(g)"></td>
      </tr>
    </tbody>
  </table>

  <input type="reset" class="btn btn-secondary mb-2" value="取り消し">
  <input type="submit" class="btn btn-primary mb-2" value="登録">
</form>

<script>
$(function(){
  $("form").submit(function(){
    let error;
    $('input[name="items[][food_name]"]').each(function(){
      if($(this).val() == ""){
        error = true;
        return false;
      }
    });

    if(error){
      alert("食材名は必須項目です！！！！");
      return false;
    }
    
  });
});
</script>