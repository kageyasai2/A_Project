<h1 class="h2 font-weight-bold recipe-title-color"><%= @recipe_title %></h1>
<div class="d-flex">
  <div class="recipe-img-wrapper mr-4">
    <img src="<%= @recipe_image %>" class="recipe-img"/>
  </div>

  <%# 材料一覧 %>
  <div>
    <h3 class="recipe-sub-color">材料</h3>

    <% @ingredients.each do |ingredient| %>
      <% if ingredient.kind_of?(Hash) %>

        <div>
          <a href="<%= 'https://www.amazon.co.jp/s?k=' + ingredient[:name] %>" class="btn rounded-circle p-0">
            <i class="fas fa-shopping-cart"></i>
          </a>

        <%= ingredient[:name] %> - <%= ingredient[:amount] %>
        </div>
      <% else %>
        <%# 材料がカテゴリ分けされている時、ここでは「■食材A」のように表示される %>
        <div class="mt-3"><%= ingredient %></div>

      <% end %>
    <% end %>
  </div>

</div>

<%# 調理手順 %>
<div class="mt-5 row">

  <% @steps.each.with_index(1) do |step, num| %>
    <div class="recipe-step-wrapper">
      <dl>
        <dt class="recipe-sub-color"><%= num %></dt>
        <dd>
          <% if step[:photo_src] %>
            <img src="<%= step[:photo_src] %>" />
          <% end %>

          <p><%= step[:text] %></p>
        </dd>
      </dl>
    </div>
  <% end %>

  <div class="clearfix"></div>
</div>

<div>
  <h2>使用する食材</h2>
  <% if @refrigerator_foods.present? %>
    <form action="/recipes/delete" method="POST" class="mt-5">
      <table>
        <thead>
          <tr>
            <th>食材名</th>
            <th>グラム数</th>
          </tr>
        </thead>
        <tbody>
          <% @refrigerator_foods.each do |refrigerator_food| %>
            <%= erb :'recipes/_show_select_foods', locals: { refrigerator_food: refrigerator_food } %>
          <% end %>
        </tbody>
      </table>
      <input type="submit" value="料理を終了する"></input>
    </form>
  <% else %>
    <p>冷蔵庫に食材がありません。</p>
  <% end %>
</div>
