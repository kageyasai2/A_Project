# テストの説明

specディレクトリ以下には`models`, `requests`, `fixture`, `system`, `integration`などのディレクトリがあります。

## models
モデルのテストは、アプリケーションのさまざまなモデルをテストするのに使われます。

モデルテストはspec/modelsディレクトリの下に保存されます。

## requests

コントローラはアプリケーションが受け付けたWebリクエストを処理します。
コントローラのテストはWebリクエストが正常に動作するかテストするのに使われます。

リクエスト/レスポンスにのみ関心を持つブラックボックステストである必要があります。
テストする項目としては以下が挙げられます。

- Webリクエストが成功したか
- 正しいページにリダイレクトされたか
- ユーザー認証が成功したか

一つのテストケースでは単一のリクエストとレスポンスを処理することが望ましいです。

## fixture
アプリケーションは、ほぼ間違いなくデータベースと密接なやりとりを行いますので、テスティングにもデータベースが必要となります。効率のよいテストを作成するには、データベースの設定方法とサンプルデータの導入方法を理解しておく必要があります。

よいテストを作成するにはよいテストデータを準備する必要があることを理解しておく必要があります。

フィクスチャ (fixture)とは、いわゆるサンプルデータを言い換えたものです。フィクスチャを使うことで、事前に定義したデータをテスト実行直前にtestデータベースに導入することができます。フィクスチャはYAMLで記述され、特定のデータベースに依存しません。1つのモデルにつき1つのフィクスチャファイルが作成されます。

フィクスチャファイルはspec/fixturesの下に置かれます。

## system

システムテストはアプリケーションのユーザー操作のテストに使えます。テストは、実際のブラウザまたはヘッドレスブラウザに対して実行されます。システムテストではそのために背後でCapybaraを使います。

アプリケーションのspec/systemディレクトリは、システムテストを作成するために使います。

## integration

結合テスト (integration test) は、複数のコントローラ同士のやりとりをテストします。一般に、アプリケーション内の重要なワークフローのテストに使われます。

結合テストは、アプリケーションのspec/integrationディレクトリに作成します。
